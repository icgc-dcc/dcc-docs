<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="http://icgc.github.io/portal/api/">
        <link rel="shortcut icon" href="../../img/favicon.ico">

   <title>API - ICGC Docs</title>
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,400,300,700,700italic' rel='stylesheet'
              type='text/css'>
        <link href="../../css/bootstrap-custom.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/base.css" rel="stylesheet">
        <link href="../../css/icgc-common.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body data-spy="scroll">
        <div class="parent-container">
            <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="background-container"></div>
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../..">
                <span class="project-org">ICGC</span> Docs</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="../..">Home</a>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Portal <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../about/">About</a>
</li>

                    
                        
<li >
    <a href="../access/">Access</a>
</li>

                    
                        
<li >
    <a href="../analysis/">Analysis</a>
</li>

                    
                        
<li class="active">
    <a href="./">API</a>
</li>

                    
                        
<li >
    <a href="../methods/">Methods</a>
</li>

                    
                        
<li >
    <a href="../projects/">Projects</a>
</li>

                    
                        
<li >
    <a href="../publication/">Publication</a>
</li>

                    
                        
<li >
    <a href="../releases/">Releases</a>
</li>

                    
                        
<li >
    <a href="../repositories/">Repositories</a>
</li>

                    
                        
<li >
    <a href="../search/">Search</a>
</li>

                    
                        
<li >
    <a href="../software/">Software</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Cloud <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../cloud/about/">About</a>
</li>

                    
                        
<li >
    <a href="../../cloud/guide/">Guide</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Submission <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../submission/about/">About</a>
</li>

                    
                        
<li >
    <a href="../../submission/api/">API</a>
</li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Dictionary</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../submission/dictionary/">Release Notes</a>
</li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Release 20</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../submission/dictionary/release-20/">Dictionary - Release 20</a>
</li>

        
            
<li >
    <a href="../../submission/dictionary/release-20/analyzed-sample-data-file-sample/">Analyzed Sample Data File (sample)</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Release 19</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../submission/dictionary/release-19/">Dictionary - Release 19</a>
</li>

        
            
<li >
    <a href="../../submission/dictionary/release-19/copy-number-somatic-mutations-cnsm-analysis-metadata-file-m-11c/">Copy Number Somatic Mutations (cnsm) - Analysis Metadata File (m)</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Release 18</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../submission/dictionary/release-18/">Dictionary - Release 18</a>
</li>

        
            
<li >
    <a href="../../submission/dictionary/release-18/analyzed-sample-data-file-sample-10a/">Analyzed Sample Data File (sample) - v0.10a</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Release 17</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../submission/dictionary/release-17/">Dictionary - Release 17</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Release 16</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../submission/dictionary/release-16/">Dictionary - Release 16</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Release 15</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../submission/dictionary/release-15/">Dictionary - Release 15</a>
</li>

        
    </ul>
  </li>

        
    </ul>
  </li>

                    
                        
<li >
    <a href="../../submission/projects/">Projects</a>
</li>

                    
                        
<li >
    <a href="../../submission/institutions/">Institutions</a>
</li>

                    
                        
<li >
    <a href="../../submission/faq/">FAQ</a>
</li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Guide</a>
    <ul class="dropdown-menu">
        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Guide Overview</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../submission/guide/">Overview</a>
</li>

        
            
<li >
    <a href="../../submission/guide/overview/submitting-raw-data-ega/">Submitting Raw Data to EGA</a>
</li>

        
            
<li >
    <a href="../../submission/guide/overview/submission-file-format/">Submission File Format</a>
</li>

        
            
<li >
    <a href="../../submission/guide/overview/file-submission/">File Submission</a>
</li>

        
            
<li >
    <a href="../../submission/guide/overview/submission-validation/">Submission Validation</a>
</li>

        
    </ul>
  </li>

        
            
<li >
    <a href="../../submission/guide/dcc-data-element-specifications/">DCC Data Element Specifications</a>
</li>

        
            
<li >
    <a href="../../submission/guide/clinical-data-submission-file-specifications/">Clinical Data Submission File Specifications</a>
</li>

        
            
<li >
    <a href="../../submission/guide/experimental-data-submission-file-specifications/">Experimental Data Submission File Specifications</a>
</li>

        
            
<li >
    <a href="../../submission/guide/incremental-submission-feature/">Incremental Submission Feature</a>
</li>

        
            
<li >
    <a href="../../submission/guide/selective-validation-feature/">Selective Validation Feature</a>
</li>

        
            
<li >
    <a href="../../submission/guide/donor-clinical-data-guidelines/">Donor Clinical Data Guidelines</a>
</li>

        
            
<li >
    <a href="../../submission/guide/icgc-simple-somatic-mutation-format/">ICGC Simple Somatic Mutation Format</a>
</li>

        
            
<li >
    <a href="../../submission/guide/sample-type-specification/">Sample Type Specification</a>
</li>

        
            
<li >
    <a href="../../submission/guide/mvel-script-restriction-example-cases/">MVEL Script Restriction Example Cases</a>
</li>

        
    </ul>
  </li>

                    
                        
<li >
    <a href="../../submission/software/">Software</a>
</li>

                    
                    </ul>
                </li>
            
            
                <li class="menu-bar"></li>
            </ul>

            <!-- Search -->
            <div class="searchbox-container col-sm-3 col-md-3 pull-right">
               <form class="searchbox navbar-form" role="search">
                  <input id="mkdocs-search-query" type="search" placeholder="Search..." autocomplete="off" name="search" class="searchbox-input">
                  <span class="searchbox-icon"><i class="fa fa-search"></i></span>
               </form>
            </div>

            
        </div>
    </div>
</div>

            <div class="container">
                <div id="mkdocs-search-results"></div>
                <div id="body">
                
                <div class="col-md-3 toc-container"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#data-portal-api">Data Portal API</a></li>
        <li>
           <ul class="nav">
           
               <li><a href="#controlled-access">Controlled Access</a></li>
           
               <li><a href="#downloading-static-files">Downloading Static Files</a></li>
           
               <li><a href="#dynamic-filtered-download">Dynamic Filtered Download</a></li>
           
               <li><a href="#common-errors">Common Errors</a></li>
           
           </ul>
       </li>
    
    </ul>
</div></div>
                
                <div class="col-md-9 main-container" role="main">
                   

<h1 id="data-portal-api">Data Portal API</h1>
<p>The ICGC Portal API can be accessed from the command line using <a href="http://curl.haxx.se/docs/manpage.html">cURL</a> but we suggest using <a href="https://github.com/jakubroztocil/httpie">httpie</a>, a cURL replacement that is particularly well-suited to JSON-based REST APIs. The following examples will contain instuctions for using both cURL and httpie.</p>
<p>ICGC API is a set of RESTful endpoints -- programmable interfaces over the Web -- that allows third-party developers to build automation scripts and apps.</p>
<p>Please see <a href="https://dcc.icgc.org/docs/">https://dcc.icgc.org/docs/</a> for detailed information on the API endpoints, representations and how the API responds to different requests.</p>
<h2 id="controlled-access">Controlled Access</h2>
<h3 id="logging-in-from-the-command-line">Logging in from the Command Line</h3>
<p>Logging in to the <strong>ICGC Portal API</strong> from the command line requires an ICGC.org account.</p>
<p><strong>Request</strong></p>
<pre><code>$ curl -XPOST -i -H 'Content-Type: application/json' 'https://dcc.icgc.org/api/v1/auth/login' -d {&quot;username&quot;:&quot;...&quot;,&quot;password&quot;:&quot;...&quot;}

$ http POST username=&quot;...&quot; password=&quot;...&quot; 'https://dcc.icgc.org/api/v1/auth/login'
</code></pre>

<p><strong>Response</strong></p>
<pre><code>{token: YOUR_DCC_PORTAL_TOKEN_HERE}
</code></pre>

<h2 id="downloading-static-files">Downloading Static Files</h2>
<p><strong>Request</strong></p>
<pre><code>$ curl -o simple_somatic_mutation.open.COAD-US.tsv.gz https://dcc.icgc.org/api/v1/download?fn=/release_16/Projects/COAD-US/simple_somatic_mutation.open.COAD-US.tsv.gz

$ http -o simple_somatic_mutation.open.COAD-US.tsv.gz https://dcc.icgc.org/api/v1/download?fn=/release_16/Projects/COAD-US/simple_somatic_mutation.open.COAD-US.tsv.gz
</code></pre>

<p><strong>Response</strong></p>
<pre><code>% Total    % Received % Xferd  Average Speed   Time    Time     Time     Current
                               Dload  Upload   Total   Spent    Left     Speed
100 21.8M  100 21.8M    0     0  27.6M      0 --:--:-- --:--:-- --:--:-- 27.5M
</code></pre>

<h3 id="controlled-access_1">Controlled Access</h3>
<p><strong>Request</strong></p>
<pre><code>$ curl -o simple_somatic_mutation.controlled.COAD-US.tsv.gz 'https://dcc.icgc.org/api/v1/download?fn=/release_16/Projects/COAD-US/simple_somatic_mutation.controlled.COAD-US.tsv.gz' --cookie 'dcc_portal_token=YOUR_DCC_PORTAL_TOKEN_HERE'

$ http -o simple_somatic_mutation.controlled.COAD-US.tsv.gz 'https://dcc.icgc.org/api/v1/download?fn=/release_16/Projects/COAD-US/simple_somatic_mutation.controlled.COAD-US.tsv.gz' 'Cookie:dcc_portal_token=YOUR_DCC_PORTAL_TOKEN_HERE'
</code></pre>

<p><strong>Response</strong></p>
<pre><code>% Total    % Received % Xferd  Average Speed   Time    Time     Time     Current
                               Dload  Upload   Total   Spent    Left     Speed
100 21.8M  100 21.8M    0     0  27.6M      0 --:--:-- --:--:-- --:--:-- 27.5M
</code></pre>

<h2 id="dynamic-filtered-download">Dynamic Filtered Download</h2>
<h3 id="start-a-job">Start a job</h3>
<p><strong>Request</strong></p>
<pre><code>$ curl 'https://dcc.icgc.org/api/v1/download/submit?filters={&quot;donor&quot;:{&quot;primarySite&quot;:{&quot;is&quot;:[&quot;Brain&quot;]}}}&amp;info=[{&quot;key&quot;:&quot;ssm&quot;,&quot;value&quot;:&quot;TSV&quot;}]&amp;email=YOUR@EMAIL.COM'

$ http 'https://dcc.icgc.org/api/v1/download/submit' 'filters=={&quot;donor&quot;:{&quot;primarySite&quot;:{&quot;is&quot;:[&quot;Brain&quot;]}}}' 'info==[{&quot;key&quot;:&quot;ssm&quot;,&quot;value&quot;:&quot;TSV&quot;}]' 'email==YOUR@EMAIL.COM'
</code></pre>

<p><strong>Response</strong></p>
<pre><code>{&quot;downloadId&quot;:&quot;YOUR_DOWNLOAD_ID&quot;}
</code></pre>

<p><strong>Optional</strong></p>
<p>You can include your email address in the request to recieve email updates on the status of your download but it is not required. You can also view the status of your download by going to <code>https://dcc.icgc.orb/downloads/YOUR_DOWNLOAD_ID</code></p>
<h3 id="view-status">View status</h3>
<p><strong>Request</strong></p>
<pre><code>$ curl 'https://dcc.icgc.org/api/v1/download/YOUR_DOWNLOAD_ID/status'

$ http 'https://dcc.icgc.org/api/v1/download/YOUR_DOWNLOAD_ID/status'
</code></pre>

<p><strong>Response</strong></p>
<pre><code>[{
    &quot;downloadId&quot;: &quot;YOUR_DOWNLOAD_ID&quot;,
    &quot;progress&quot;: [
        {
            &quot;completed&quot;: &quot;true&quot;,
            &quot;dataType&quot;: &quot;ssm&quot;,
            &quot;denominator&quot;: &quot;328238&quot;,
            &quot;numerator&quot;: &quot;629347&quot;,
            &quot;percentage&quot;: &quot;0.5&quot;
        }
    ],
    &quot;status&quot;: &quot;RUNNING&quot;
}]
</code></pre>

<h3 id="downloading">Downloading</h3>
<p>When you see <code>"status": "SUCCEEDED"</code> you can download the file.</p>
<p><strong>Request</strong></p>
<pre><code>$ curl 'https://dcc.icgc.org/api/v1/download/YOUR_DOWNLOAD_ID' -o my_dl.tar

$ http 'https://dcc.icgc.org/api/v1/download/YOUR_DOWNLOAD_ID' -o my_dl.tar
</code></pre>

<p><strong>Response</strong></p>
<pre><code>% Total    % Received % Xferd  Average Speed   Time    Time     Time     Current
                               Dload  Upload   Total   Spent    Left     Speed
100 12.3M    0 12.3M    0     0   471k      0 --:--:--  0:00:26 --:--:-- 3411k
</code></pre>

<h3 id="controlled-access_2">Controlled Access</h3>
<p>If the Dynamic Download Job contains controlled access data you must include your <code>dcc_portal_token</code> with every request.</p>
<p><strong>Request</strong></p>
<pre><code>$ curl 'https://dcc.icgc.org/api/v1/download/submit?filters={&quot;donor&quot;:{&quot;primarySite&quot;:{&quot;is&quot;:[&quot;Brain&quot;]}}}&amp;info=[{&quot;key&quot;:&quot;sgv&quot;,&quot;value&quot;:&quot;TSV&quot;}]&amp;email=YOUR@EMAIL.COM' --cookie 'dcc_portal_token=YOUR_DCC_PORTAL_TOKEN_HERE'

$ http 'https://dcc.icgc.org/api/v1/download/submit' 'filters=={&quot;donor&quot;:{&quot;primarySite&quot;:{&quot;is&quot;:[&quot;Brain&quot;]}}}' 'info==[{&quot;key&quot;:&quot;sgv&quot;,&quot;value&quot;:&quot;TSV&quot;}]' 'email==YOUR@EMAIL.COM' 'Cookie:dcc_portal_token=YOUR_DCC_PORTAL_TOKEN_HERE'
</code></pre>

<p><strong>Request</strong></p>
<pre><code>$ curl 'https://dcc.icgc.org/api/v1/download/YOUR_DOWNLOAD_ID/status' --cookie 'dcc_portal_token=YOUR_DCC_PORTAL_TOKEN_HERE'

$ http 'https://dcc.icgc.org/api/v1/download/YOUR_DOWNLOAD_ID/status' 'Cookie:dcc_portal_token=YOUR_DCC_PORTAL_TOKEN_HERE'
</code></pre>

<p><strong>Request</strong></p>
<pre><code>$ curl 'https://dcc.icgc.org/api/v1/download/YOUR_DOWNLOAD_ID' --cookie 'dcc_portal_token=YOUR_DCC_PORTAL_TOKEN_HERE' -o my_dl.tar

$ http 'https://dcc.icgc.org/api/v1/download/YOUR_DOWNLOAD_ID' -o my_dl.tar 'Cookie:dcc_portal_token=YOUR_DCC_PORTAL_TOKEN_HERE'
</code></pre>

<h2 id="common-errors">Common Errors</h2>
<h3 id="file-downloaded-successfully-but-only-133b">File downloaded successfully but only 133B</h3>
<p>Look into the file, you should see a message along the lines of:</p>
<pre><code>Error(code=404, message=Download with id '/release_16/Projects/COAD-US/simple_somatic_mutation.controlled.COAD-US.tsv.gz' not found.)
</code></pre>

<p><strong>Solution</strong></p>
<p>Make sure the path to the file is correct and if you are trying to download a controlled access file make sure your <code>dcc_access_token</code> is valid.</p>
               </div>
               </div>
            </div>

            <footer>
                <div class="row">
                    <div class="col-md-12 logo">
                        <a href="http://oicr.on.ca/" target="_blank"><img src="../../img/OICR2logo.png"></a>
                    </div>
                </div>

                
                <div class="row">
                    <div class="col-md-12 footer-caption">
                        <small>
                            &copy; 2015-2016 <a href="https://icgc.org" target="_blank">International Cancer Genome Consortium.</a>
                            All Rights reserved.
                        </small>

                        
                        <small class="version-caption">
                            ICGC Docs Version 1.0
                        </small>
                        
                    </div>
                </div>
                
            </footer>

            <script src="../../js/jquery-1.10.2.min.js"></script>
            <script src="../../js/bootstrap-3.0.3.min.js"></script>
            <script src="../../js/highlight.pack.js"></script>
            <script src="../../mkdocs/js/lunr-0.5.7.min.js"></script>
            <script src="../../js/jquery.highlight-4.closure.js"></script>
            <script src="../../js/base.js"></script>
            <script src="../../js/icgc-common.js"></script>
            <script>var base_url = '../..';</script>
        </div>
    </body>
</html>