<!DOCTYPE html>
<html lang="en">


    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
         
        
        <link rel="canonical" href="http://docs.icgc.org/submission/guide/ega_file_validation/">
        <link rel="shortcut icon" href="/img/favicon.ico">

   <title>EGA Raw File Validation - ICGC DCC Docs</title>

        <link rel="prefetch" href="/fonts/fontello/font/icgc-icons.woff?93317606" />
        <link href="/fonts/fontello/css/icgc-icons.css" rel="stylesheet">
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,400,300,700,700italic' rel='stylesheet'
              type='text/css'>
        
        <link href="/css/bootstrap-custom.css" rel="stylesheet">
        <link href="/css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="/css/highlight.css">
        <link href="/fonts/fontello/css/animation.css" rel="stylesheet">
        <link href="/css/base.css" rel="stylesheet">
        <link href="/css/icgc-common.css" rel="stylesheet">
        



        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
        <script src="/js/jquery-1.11.3.min.js"></script>
    </head>

    <body>
        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="background-container"></div>
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            
            <a class="navbar-brand" href="../../..">
            
                <span class="project-org">ICGC</span> DCC Docs</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="/../../..">Home</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Portal <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    
    <a href="../../../portal/about/">About</a>
    
</li>

                    
                        
<li >
    
    <a href="../../../portal/access/">Access</a>
    
</li>

                    
                        
<li >
    
    <a href="../../../portal/analysis/">Analysis</a>
    
</li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">API</a>
    <ul class="dropdown-menu">
        
            
<li >
    
    <a href="../../../portal/api/">Guide</a>
    
</li>

        
            
<li >
    
    <a href="../../../portal/api-endpoints/">Endpoints</a>
    
</li>

        
    </ul>
  </li>

                    
                        
<li >
    
    <a href="../../../portal/methods/">Methods</a>
    
</li>

                    
                        
<li >
    
    <a href="../../../portal/projects/">Projects</a>
    
</li>

                    
                        
<li >
    
    <a href="../../../portal/publication/">Publication</a>
    
</li>

                    
                        
<li >
    
    <a href="../../../portal/releases/">Releases</a>
    
</li>

                    
                        
<li >
    
    <a href="../../../portal/repositories/">Repositories</a>
    
</li>

                    
                        
<li >
    
    <a href="../../../portal/search/">Search</a>
    
</li>

                    
                        
<li >
    
    <a href="../../../portal/browsers/">Browsers</a>
    
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Cloud <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    
    <a href="../../../cloud/about/">About</a>
    
</li>

                    
                        
<li >
    
    <a href="../../../cloud/guide/">Guide</a>
    
</li>

                    
                        
<li >
    
    <a href="../../../cloud/icgc-get/">icgc-get</a>
    
</li>

                    
                        
<li >
    
    <a href="../../../cloud/repositories/">Repositories</a>
    
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Submission <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    
    <a href="../../about/">About</a>
    
</li>

                    
                        
<li >
    
    <a href="../../api/">API</a>
    
</li>

                    
                        
<li >
    
    <a href="../../projects/">Projects</a>
    
</li>

                    
                        
<li >
    
    <a href="../../institutions/">Institutions</a>
    
</li>

                    
                        
<li >
    
    <a href="../../faq/">FAQ</a>
    
</li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Guide</a>
    <ul class="dropdown-menu">
        
            
<li >
    
    <a href="../intro/">Introduction</a>
    
</li>

        
            
<li >
    
    <a href="../overview/submitting-raw-data-ega/">Submitting Raw Data to EGA</a>
    
</li>

        
            
<li >
    
    <a href="../overview/submission-file-format/">Submission File Format</a>
    
</li>

        
            
<li >
    
    <a href="../overview/file-submission/">File Submission</a>
    
</li>

        
            
<li >
    
    <a href="../overview/submission-validation/">Submission Validation</a>
    
</li>

        
            
<li class="active">
    
    <a href="./">EGA Raw File Validation</a>
    
</li>

        
            
<li >
    
    <a href="../mvel-script-restriction-example-cases/">MVEL Script Restriction Example Cases</a>
    
</li>

        
            
<li >
    
    <a href="../incremental-submission-feature/">Incremental Submission Feature</a>
    
</li>

        
            
<li >
    
    <a href="../selective-validation-feature/">Selective Validation Feature</a>
    
</li>

        
            
<li >
    
    <a href="../dcc-data-element-specifications/">DCC Data Element Specifications</a>
    
</li>

        
            
<li >
    
    <a href="../clinical-data-submission-file-specifications/">Clinical Data Submission File Specifications</a>
    
</li>

        
            
<li >
    
    <a href="../donor-clinical-data-guidelines/">Donor Clinical Data Guidelines</a>
    
</li>

        
            
<li >
    
    <a href="../sample-type-specification/">Sample Type Specification</a>
    
</li>

        
            
<li >
    
    <a href="../experimental-data-submission-file-specifications/">Experimental Data Submission File Specifications</a>
    
</li>

        
            
<li >
    
    <a href="../icgc-simple-somatic-mutation-format/">Simple Somatic Mutation Format</a>
    
</li>

        
    </ul>
  </li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">PCAWG</a>
    <ul class="dropdown-menu">
        
            
<li >
    
    <a href="../../pcawg/pancancer-clinical-data-requirements/">PanCancer Clinical Data Requirements</a>
    
</li>

        
            
<li >
    
    <a href="../../pcawg/pcawg-faq/">FAQ</a>
    
</li>

        
    </ul>
  </li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dictionary <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    
    <a href="../../../dictionary/about/">About</a>
    
</li>

                    
                        
<li >
    
    <a href="../../../dictionary/viewer/">Viewer</a>
    
</li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Release Notes</a>
    <ul class="dropdown-menu">
        
            
<li >
    
    <a href="../../../dictionary/releases/">Releases</a>
    
</li>

        
            
<li >
    
    <a href="../../../dictionary/release-24/">Release 24</a>
    
</li>

        
            
<li >
    
    <a href="../../../dictionary/release-23/">Release 23</a>
    
</li>

        
            
<li >
    
    <a href="../../../dictionary/release-22/">Release 22</a>
    
</li>

        
            
<li >
    
    <a href="../../../dictionary/release-21/">Release 21</a>
    
</li>

        
            
<li >
    
    <a href="../../../dictionary/release-20/">Release 20</a>
    
</li>

        
            
<li >
    
    <a href="../../../dictionary/release-19/">Release 19</a>
    
</li>

        
            
<li >
    
    <a href="../../../dictionary/release-18/">Release 18</a>
    
</li>

        
            
<li >
    
    <a href="../../../dictionary/release-17/">Release 17</a>
    
</li>

        
            
<li >
    
    <a href="../../../dictionary/release-16/">Release 16</a>
    
</li>

        
            
<li >
    
    <a href="../../../dictionary/release-15/">Release 15</a>
    
</li>

        
    </ul>
  </li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Software <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    
    <a href="../../../software/about/">About</a>
    
</li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Releases</a>
    <ul class="dropdown-menu">
        
            
<li >
    
    <a href="../../../software/releases/storage-client/">Storage Client</a>
    
</li>

        
            
<li >
    
    <a href="../../../software/releases/portal/">Portal</a>
    
</li>

        
            
<li >
    
    <a href="../../../software/releases/submission/">Submission</a>
    
</li>

        
            
<li >
    
    <a href="../../../software/releases/icgc-get/">icgc-get</a>
    
</li>

        
    </ul>
  </li>

                    
                        
<li >
    
    <a href="../../../software/binaries/">Binaries</a>
    
</li>

                    
                        
<li >
    
    <a href="../../../software/code/">Source Code</a>
    
</li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Development</a>
    <ul class="dropdown-menu">
        
            
<li >
    
    <a href="../../../software/development/setup/">Setup</a>
    
</li>

        
            
<li >
    
    <a href="../../../software/development/general/">General</a>
    
</li>

        
    </ul>
  </li>

                    
                    </ul>
                </li>
            
            
            
                <li >
                    <a href="/../../../pcawg/">PCAWG</a>
                </li>
            
            
                <li class="menu-bar"></li>
            </ul>

            <!-- Search -->
            <div class="searchbox-container col-sm-3 col-md-3">
               <form class="searchbox navbar-form" role="search">
                  <input id="mkdocs-search-query" type="search" placeholder="Search..." autocomplete="off" name="search" class="searchbox-input">
                  <span class="searchbox-icon">
                      <i class="icon-search search-bttn"></i>
                      <i class="icon-cancel search-cancel-bttn"></i>
                  </span>
               </form>
            </div>

            
        </div>
    </div>
</div>
        <div class="parent-container">

            <div id="docs-container" class="container">
                

<div id="mkdocs-search-results-container" class="row">
    <div class="col-md-12">
        <h1 id="dictionary-viewer" class="no-auto-render">
            <span class="header-badge" style="padding: 0.90rem 1.0rem 1.2rem 1.6rem;">
                <i class="icon-search"></i>
            </span> Search Results
        </h1>
        <div id="search-body">

        </div>
        <div id="mkdocs-search-results">

        </div>
    </div>
</div>
                <div id="body">
                
                    
                        <div class="col-md-3 toc-container"><div class="bs-sidebar hidden-print well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#ega-raw-file-validation">EGA Raw File Validation</a>
           <ul class="nav">
           
               <li class=""><a href="#summary">Summary</a>
               
               </li>
           
               <li class=""><a href="#ega-file-accession-validation-check">EGA File Accession Validation Check</a>
               
               </li>
           
               <li class=""><a href="#where-to-get-the-ega-file-accession">Where to get the EGA File Accession</a>
               
               </li>
           
               <li class=""><a href="#requirements">Requirements</a>
               
                    <ul class="nav">
                        
                        <li class=""><a href="#examples-of-valid-raw_data_accession-when-raw_data_repository-is-ega">Examples of valid 'raw_data_accession' when 'raw_data_repository' is 'EGA':</a></li>
                        
                    </ul>
               
               </li>
           
               <li class=""><a href="#interpreting-error-message-related-to-missing-ega-file-accessions">Interpreting Error Message related to Missing EGA File accessions:</a>
               
                    <ul class="nav">
                        
                        <li class=""><a href="#error-message-1">Error Message #1:</a></li>
                        
                        <li class=""><a href="#error-message-2">Error Message #2:</a></li>
                        
                        <li class=""><a href="#error-message-3">Error Message #3:</a></li>
                        
                        <li class=""><a href="#error-message-4">Error Message #4:</a></li>
                        
                    </ul>
               
               </li>
           
           </ul>
       </li>
        </li>
    
    </ul>
</div></div>
                    
                    <div class="col-md-9 main-container" role="main">
                        

<h1 id="ega-raw-file-validation">EGA Raw File Validation</h1>
<h2 id="summary">Summary</h2>
<p>ICGC member projects are required by <a href="https://icgc.org/icgc/goals-structure-policies-guidelines/e2-data-release-policies">ICGC policy</a>, to submit their raw sequencing data and other primary data to a controlled access public repository. The official ICGC DCC-supported repository for non-US ICGC projects' sequencing reads is the European Bioinformatics Institute's (EBI), <a href="https://ega-archive.org">European Genome-phenome Archive (EGA)</a>. When projects submit their raw sequencing data to EBI's EGA repository, EGA will supply file accession identifiers (of the format EGAFXXXXXXXXXXX) for each raw data file archived. Projects are required to populate the DCC 'raw_data_accession' field found in the <a href="http://docs.icgc.org/dictionary/viewer/#?q=raw_data_accession&amp;viewMode=graph">experimental metadata files</a> with these EGA File accession identifiers, and ensure the DCC-submitted sample ID ('analyzed_sample_id' and 'matched_sample_id' DCC fields) matches the EGA-submitted sample ID ('sample_alias' field in EGA). The sample ID and EGA file accession identifiers enable data users to retrieve the corresponding raw data for a given DCC-submitted sample_id. </p>
<h2 id="ega-file-accession-validation-check">EGA File Accession Validation Check</h2>
<p>All new data submissions are required to:</p>
<ol>
<li>Submit EGA File accessions for the 'analyzed_sample_id' and 'matched_sample_id' in the 'raw_data_accession' field when the 'raw_data_repository' is 'EGA'. </li>
<li>Ensure the DCC-submitted sample ID and EGA-submitted sample ID match </li>
</ol>
<p>This validation check will validate the existence of the raw file at EGA, meaning all submissions with <strong>unpublished</strong> files at EGA will be <strong>invalid</strong>. </p>
<table>
<thead>
<tr>
<th>Field Name</th>
<th>Note</th>
</tr>
</thead>
<tbody>
<tr>
<td>analyzed_sample_id</td>
<td>Must match EGA's 'sample_alias' field in EGA Sample metadata XML<a href="#ega_sample_note">**</a></sup></td>
</tr>
<tr>
<td>matched_sample_id</td>
<td>Must match EGA's 'sample_alias' field in EGA Sample metadata XML<a href="#ega_sample_note">**</a></sup></td>
</tr>
<tr>
<td>raw_data_repository</td>
<td>code '1' for EGA</td>
</tr>
<tr>
<td>raw_data_accession</td>
<td>Currently accepts: EGA Study (EGAS), Dataset (EGAD), Experiment (EGAX), Sample (EGAN), Run (EGAR), and File (EGAF) accessions.</td>
</tr>
</tbody>
</table>
<p><a id=ega_sample_note></a>**If you are unable to edit/update EGA's 'sample_alias' field, please include the sample attribute 'submitter_sample_id' in the EGA Sample metadata XML file and set the value equal to the DCC-submitted sample ID (see <a href="http://docs.icgc.org/submission/guide/overview/submitting-raw-data-ega/#sample-xml-file">here</a> for example EGA Sample XML file stucture)</p>
<h2 id="where-to-get-the-ega-file-accession">Where to get the EGA File Accession</h2>
<p><a href="https://ega-archive.org">EGA</a> provides a <strong>Sample_File.map</strong> mapping file which includes mapping information between a sample identifier and the EGA File Accession ID. For released EGA datasets, this mapping file can be found in the EGA dataset metadata tarball downloadable from the EGA website. For example for a given EGA dataset: </p>
<ul>
<li>Ensure you are logged into EGA</li>
<li>Go to the EGA Dataset page: https://ega-archive.org/datasets/[EGA Dataset Accession ID]</li>
<li>Click on "Download Metadata". This will download a file [EGA Dataset Accession ID].tar.gz. </li>
<li>Once decompressed, the mapping file can be found at [EGA Dataset Accession ID]/delimited_maps/Sample_File.map. </li>
<li>Please submit the EGA File accession ID(s) for each sample ID in your DCC submission.</li>
</ul>
<p>If the metadata for a given EGA Dataset has not been released and is not available via the website (and therefore cannot be downloaded as a tarball file), please contact EGA HelpDesk at <a href="mailto:ega-helpdesk@ebi.ac.uk">ega-helpdesk@ebi.ac.uk</a> who will provide data submitters with the Sample ID to EGA File Accession ID mapping information. </p>
<p><em>We strongly encourage ICGC member projects to start this process early as it may take time to gather and validate your data submission.</em></p>
<h2 id="requirements">Requirements</h2>
<p>The EGA Raw File Validation check will be valid if the following conditions are met:</p>
<ol>
<li>Each submitted EGA File ID must map to either analyzed_sample_id or matched_sample_id</li>
<li>One or more EGA File ID(s) should map to analyzed_sample_id</li>
<li>If "matched_sample_id" field exists in metadata file, one or more EGA File ID(s) should map to matched_sample_id</li>
</ol>
<p><span style="color:red"><strong><em>NOTE: Please ensure the sample ID you submit to EGA ("sample_alias" EGA field) matches the sample ID you submit to DCC ("analyzed_sample_id" and "matched_sample_id" DCC field)</em></strong></span></p>
<h3 id="examples-of-valid-raw_data_accession-when-raw_data_repository-is-ega">Examples of valid 'raw_data_accession' when 'raw_data_repository' is 'EGA':</h3>
<table>
<thead>
<tr>
<th>Description</th>
<th>raw_data_accession</th>
</tr>
</thead>
<tbody>
<tr>
<td>Multiple EGA File accessions (one for 'analyzed_sample_id', one for 'matched_sample_id')</td>
<td>EGAF00000892107:EGAF00000892115</td>
</tr>
<tr>
<td>EGA File accession if 'matched_sample_id' field does not exist in metadata file</td>
<td>EGAF00000892107<br/>EGAD00001001116:EGAF00000892115</td>
</tr>
<tr>
<td>EGA Study, EGA Dataset, mutliple EGA File accessions</td>
<td>EGAS00001000262:EGAD00001001116:EGAF00000892115</td>
</tr>
<tr>
<td>EGA Dataset, multiple EGA File accessions</td>
<td>EGAD00001001116:EGAF00000892115:EGAF00000892107:EGAF00000892116:EGAF00000892109</td>
</tr>
<tr>
<td>EGA Dataset, Sample and multiple EGA File accessions</td>
<td>EGAS00001000262:EGAD00001001116:EGAN00001250305:EGAF00000892107:EGAF00000892115</td>
</tr>
<tr>
<td>EGA Study, EGA Dataset, EGA Sample, multiple EGA Experiment, multiple EGA Run, multiple EGA File accessions</td>
<td>EGAS00001000395:EGAD00001001956:EGAN00001223451:EGAX00001216629:EGAX00001213322:EGAX00001216631:EGAX00001216630:EGAX00001216695:EGAR00001229605:EGAR00001232235:EGAR00001229594:EGAR00001229593:EGAR00001229596:EGAF00000892107:EGAF00000892115</td>
</tr>
</tbody>
</table>
<h2 id="interpreting-error-message-related-to-missing-ega-file-accessions">Interpreting Error Message related to Missing EGA File accessions:</h2>
<h4 id="error-message-1">Error Message #1:</h4>
<pre><code>'At least one file accession is required for analysis_id: &quot;some_analysis_id_1&quot;'
</code></pre>

<p><strong> Interpretation: </strong>
An EGA File Accession ID is not submitted for sample IDs with analysis_id "some_analysis_id_1"</p>
<p><strong>Solution</strong>:
<em> An EGA File accession (EGAF</em>) is required in the "raw_data_accession" field for samples with analysis_id "some_analysis_id_1".</p>
<h4 id="error-message-2">Error Message #2:</h4>
<pre><code>Could not match file to sample in: [{&quot;submitterSampleId&quot;:&quot;BCC001T&quot;,&quot;fileId&quot;:&quot;EGAF00001673032&quot;}]
</code></pre>

<p><strong>Interpretation:</strong>
The sample ID submitted to DCC does not match the sample submitted to EGA ("BCC001T") for the submitted EGA File ID accession EGAF00001673032.</p>
<p><strong>Solution:</strong>
Ensure the EGA-submitted sample ID ("sample_alias" field in EGA Sample XML file) matches the DCC-submitted sample ID for the given EGA File ID. If you are not able to edit/update the "sample_alias" field in EGA, please include the sample_attribute "submitter_sample_id" and set the value to match the DCC-submitted sample ID. This will ensure we are able to map the sample ID in EGA. For more information on EGA metadata requirements, please refer to the <a href="http://docs.icgc.org/submission/guide/overview/submitting-raw-data-ega/">EGA Raw Data submission guide</a>.</p>
<h4 id="error-message-3">Error Message #3:</h4>
<pre><code>Missing EGA File ID for matched_sample_id: abc_n1
</code></pre>

<p><strong>Interpretation:</strong>
You are missing an EGA File ID for the 'matched_sample_id'.</p>
<p><strong>Solution:</strong>
An EGA File ID is required for both the 'analyzed_sample_id' and 'matched_sample_id'. Ensure your data submission includes the EGA File ID(s) for the 'matched_sample_id' as well. </p>
<h4 id="error-message-4">Error Message #4:</h4>
<pre><code>No files found with id EGAF00001563762
</code></pre>

<p><strong>Interpretation:</strong>
The submitted EGA File ID does not exist in the EGA repository
This error message can appear for the following reasons:
- The submitted EGA File ID is incorrect
- The EGA dataset to which this EGA File ID belongs to has not been released at EGA.
- The EGA dataset associated with this EGA File ID does not belong to ICGC DAC.</p>
<p><strong>Solution:</strong>
Ensure the EGA dataset has been released and is under ICGC DAC at EGA, and the submitted EGA File ID is correctly formatted.</p>
                    </div>
                
               </div>
            </div>

            <footer id="docs-footer">
                <div class="row">
                    <div class="col-md-12 logo">
                        <a href="http://oicr.on.ca/" target="_blank"><img src="../../../img/OICR2logo.png"></a>
                    </div>
                </div>

                
                <div class="row">
                    <div class="col-md-12 footer-caption">
                        <small>
                            &copy; 2015-2016 <a href="https://icgc.org" target="_blank">International Cancer Genome Consortium.</a>
                            All Rights reserved.
                        </small>

                        
                        <small class="version-caption">
                            ICGC DCC Docs Version 1.0
                        </small>
                        
                    </div>
                </div>
                
            </footer>

            <script src="/js/jQuery-FontSpy.js"></script>
            <script src="/js/bootstrap-3.0.3.min.js"></script>
            <script src="/js/highlight.pack.js"></script>
            <script src="/js/lunr-0.5.7.min.js"></script>
            <script src="/js/jquery.highlight-4.closure.js"></script>
            <script src="/js/jquery.bootstrap-autohidingnavbar.min.js"></script>
            <script src="/js/jquery.scrollUp.min.js"></script>
            <script src="/js/icgc-common.js"></script>
            <script>var base_url = '../../..';</script>
        </div>
        <script src="/js-out/commons-chunk.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        
    </body>
</html>