<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="http://icgc.github.io/submission/api/">
        <link rel="shortcut icon" href="../../img/favicon.ico">

   <title>API - ICGC Docs</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>
        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../..">ICGC Docs</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="../..">Home</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Portal <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../portal/about/">About</a>
</li>

                    
                        
<li >
    <a href="../../portal/access/">Access</a>
</li>

                    
                        
<li >
    <a href="../../portal/analysis/">Analysis</a>
</li>

                    
                        
<li >
    <a href="../../portal/api/">API</a>
</li>

                    
                        
<li >
    <a href="../../portal/methods/">Methods</a>
</li>

                    
                        
<li >
    <a href="../../portal/projects/">Projects</a>
</li>

                    
                        
<li >
    <a href="../../portal/publication/">Publication</a>
</li>

                    
                        
<li >
    <a href="../../portal/releases/">Releases</a>
</li>

                    
                        
<li >
    <a href="../../portal/repositories/">Repositories</a>
</li>

                    
                        
<li >
    <a href="../../portal/search/">Search</a>
</li>

                    
                        
<li >
    <a href="../../portal/software/">Software</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Cloud <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../cloud/about/">About</a>
</li>

                    
                        
<li >
    <a href="../../cloud/guide/">Guide</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Submission <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../about/">About</a>
</li>

                    
                        
<li class="active">
    <a href="./">API</a>
</li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Dictionary</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../dictionary/">Release Notes</a>
</li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Release 20</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../dictionary/release-20/">Dictionary - Release 20</a>
</li>

        
            
<li >
    <a href="../dictionary/release-20/analyzed-sample-data-file-sample/">Analyzed Sample Data File (sample)</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Release 19</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../dictionary/release-19/">Dictionary - Release 19</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Release 18</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../dictionary/release-18/">Dictionary - Release 18</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Release 17</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../dictionary/release-17/">Dictionary - Release 17</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Release 16</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../dictionary/release-16/">Dictionary - Release 16</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Release 15</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../dictionary/release-15/">Dictionary - Release 15</a>
</li>

        
    </ul>
  </li>

        
    </ul>
  </li>

                    
                        
<li >
    <a href="../icgc-dcc-project-codes/">ICGC DCC Project Codes</a>
</li>

                    
                        
<li >
    <a href="../list-institutions/">List of Institutions</a>
</li>

                    
                        
<li >
    <a href="../faq/">FAQ</a>
</li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Guide</a>
    <ul class="dropdown-menu">
        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Guide Overview</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../guide/">Overview</a>
</li>

        
            
<li >
    <a href="../guide/overview/submitting-raw-data-ega/">Submitting Raw Data to EGA</a>
</li>

        
            
<li >
    <a href="../guide/overview/submission-file-format/">Submission File Format</a>
</li>

        
            
<li >
    <a href="../guide/overview/file-submission/">File Submission</a>
</li>

        
            
<li >
    <a href="../guide/overview/submission-validation/">Submission Validation</a>
</li>

        
    </ul>
  </li>

        
            
<li >
    <a href="../guide/dcc-data-element-specifications/">DCC Data Element Specifications</a>
</li>

        
            
<li >
    <a href="../guide/clinical-data-submission-file-specifications/">Clinical Data Submission File Specifications</a>
</li>

        
            
<li >
    <a href="../guide/experimental-data-submission-file-specifications/">Experimental Data Submission File Specifications</a>
</li>

        
            
<li >
    <a href="../guide/incremental-submission-feature/">Incremental Submission Feature</a>
</li>

        
            
<li >
    <a href="../guide/selective-validation-feature/">Selective Validation Feature</a>
</li>

        
            
<li >
    <a href="../guide/donor-clinical-data-guidelines/">Donor Clinical Data Guidelines</a>
</li>

        
            
<li >
    <a href="../guide/icgc-simple-somatic-mutation-format/">ICGC Simple Somatic Mutation Format</a>
</li>

        
            
<li >
    <a href="../guide/sample-type-specification/">Sample Type Specification</a>
</li>

        
            
<li >
    <a href="../guide/mvel-script-restriction-example-cases/">MVEL Script Restriction Example Cases</a>
</li>

        
    </ul>
  </li>

                    
                        
<li >
    <a href="../software/">Software</a>
</li>

                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <input name="q" id="mkdocs-search-query" type="text" autocomplete="off" placeholder="Search docs">
                </li>
            </ul>

            
        </div>
    </div>
</div>

        <div class="container">
            <div id="mkdocs-search-results"></div>
            <div id="body">
            
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#api">API</a></li>
        <li>
           <ul class="nav">
           
               <li><a href="#code-lists">Code lists</a></li>
           
               <li><a href="#release-and-dictionary-states-clarification">Release and dictionary states clarification</a></li>
           
               <li><a href="#dictionary">Dictionary</a></li>
           
           </ul>
       </li>
    
    </ul>
</div></div>
            
            <div class="col-md-9" role="main">
               

<h1 id="api">API</h1>
<h3 id="code-lists">Code lists</h3>
<h5 id="get-codelist-by-name">Get codelist by name</h5>
<p>This is open-access (since 13/07/22 - 1.10 re-deployment)
This gets a single codelist, keep in mind the "Add Codelist" below consumes an array of code lists so you will <em>most likely want to use the "Get Codelist" request below!</em></p>
<pre><code class="shell">curl -v -XGET http://hwww{1,2}-dcc:5380/ws/codeLists/myCodeListName -H &quot;Accept: application/json&quot;
</code></pre>

<h5 id="get-codelists">Get codelists</h5>
<p>This is open-access (since 13/03/19 - 1.3 re-deployment)  </p>
<p>The following will return a JSON document that includes an array of all the code lists on the server.
curl -v -XGET http://hwww{1,2}-dcc:5380/ws/codeLists -H "Accept: application/json"</p>
<h5 id="add-codelists">Add codelists</h5>
<p>This will not reset the states of submissions. This POST assumes you are submitting a JSON document with an array of code lists.  You could, in theory, get the current code lists via the GET above, modify the code lists you care about (ensure you give it a unique "name"), and then post the updated code list document below.  This will create a new code lists with a new name that you can later reference in an updated dictionary. Note, you should remove "created", "id", and "lastUpdate" fields if you're modifying the codeLists that you retrieved from the server.</p>
<pre><code class="shell">cat /path/to/codeListArray.json
[
  {
    &quot;label&quot;: &quot;some label&quot;,
    &quot;name&quot;: &quot;myCodeListName&quot;,
    &quot;terms&quot;: [
      {
        &quot;code&quot;: &quot;1&quot;,
        &quot;uri&quot;: &quot;[http://...&quot;](http://...),
        &quot;value&quot;: &quot;male&quot;
      },
      {
        &quot;code&quot;: &quot;2&quot;,
        &quot;uri&quot;: &quot;[http://...&quot;](http://...),
        &quot;value&quot;: &quot;female&quot;
      }
    ]
  },
  { ...
]

curl -v -H &quot;Accept: application/json&quot; -XPOST http://hwww{1,2}-dcc:5380/ws/codeLists -H &quot;Authorization: X-DCC-Auth $(echo -n icgcdcc:${ADMIN_PASSWD?} | base64)&quot; -H &quot;Content-Type: application/json&quot; --data @/path/to/codeListArray.json
</code></pre>

<p>Notes:</p>
<ul>
<li>The file must contain an <strong>array</strong> of <code>CodeList</code> documents (possibly only one)</li>
<li>The <em>name</em> property is the one that may be referred to from a dictionary (see section below), this must be unique (check the old code lists first)</li>
<li>More than one <em>Field</em> may refer to a <em>CodeList</em> (in the dictionary)</li>
<li>The POST will return 201 if the code lists are created properly, you can check the codelist using the GET above</li>
</ul>
<h5 id="add-terms-codelist-elements">Add terms (codelist elements)</h5>
<p>This <strong>WILL</strong> reset the states of <strong>INVALID</strong> submissions <strong>IF</strong> the current dictionary (see <a href="#AdminSOP-Getcurrentdictionary">Getcurrentdictionary</a>) makes use of the target codelist  </p>
<pre><code class="shell">cat /path/to/termArray.json
[
  {
    &quot;code&quot;: &quot;12&quot;,
    &quot;uri&quot;: null,
    &quot;value&quot;: &quot;value for 12&quot;
  },
  {
    &quot;code&quot;: &quot;11&quot;,
    &quot;uri&quot;: null,
    &quot;value&quot;: &quot;value for 13&quot;
  }
]

curl -v -XPOST http://hwww{1,2}-dcc:5380/ws/codeLists/${CODELIST_NAME?}/terms -H &quot;Authorization: X-DCC-Auth $(echo -n icgcdcc:${ADMIN_PASSWD?} | base64)&quot; -H &quot;Content-Type: application/json&quot; --data @/path/to/termArray.json -H &quot;Accept: application/json&quot;
</code></pre>

<p>Notes:</p>
<ul>
<li>The file must contain an <strong>array</strong> of <code>Term</code> documents (possibly only one)</li>
<li>The <code>CodeList</code> referred to in the URL must already exist</li>
</ul>
<h5 id="updating-a-codelist-label">Updating a codelist label</h5>
<p>This will not reset the states of submissions. This just updates the label on the code list, not very functional. In the future we'll probably allow the ability to change dbxref and other fields on the code list object using this resource.</p>
<pre><code class="shell">curl -v -H &quot;Authorization: X-DCC-Auth $(echo -n icgcdcc:${ADMIN_PASSWD?} | base64)&quot; -XPUT http://hwww{1,2}-dcc:5380/ws/codeLists/${CODELIST_NAME?} -H &quot;Content-Type: application/json&quot; --data '{&quot;name&quot;:&quot;dr__donor_sex&quot;, &quot;label&quot;: &quot;some new label&quot;}' -H &quot;Accept: application/json&quot;
</code></pre>

<p>Notes:
<em>   The <code>CodeList</code> referred to in the URL must already exist
</em>   In the future we may support updating more than just the <em>label</em></p>
<h3 id="release-and-dictionary-states-clarification">Release and dictionary states clarification</h3>
<p>A dictionary can be either OPENED or CLOSED. A release can also be OPENED or COMPLETED, yet the two have slightly different meaning so this may be confusing. To summarize:</p>
<ul>
<li>COMPLETED release: frozen past releases</li>
<li>OPENED release: the "next" release - only ever one at a time</li>
<li>CLOSED dictionary: frozen dictionary that <strong>is</strong> used by a past release (an OPENED release could use a CLOSED or OPENED dictionary)</li>
<li>
<p>OPENED dictionary: updatable dictionary that <strong>is not</strong> used by a past release   </p>
<ul>
<li>there could be no OPENED dictionary at a given time</li>
<li>there could also be more than one OPENED dictionary (think "unused" dictionary - maybe WIP ones for instance)</li>
<li>typical case is a bunch of CLOSED dictionary used by past COMPLETED releases, one OPENED dictionary that is used by the OPENED release, and potentially some more OPENED dictionary not in use yet.  Alternatively there could be a bunch of CLOSED dictionaries used by past COMPLETED releases, the OPENED release could also point to a CLOSED dictionary, and potentially some more OPENED dictionaries not yet in use.</li>
<li>When you COMPLETED a release the OPENED dictionary is automatically CLOSED.</li>
</ul>
</li>
</ul>
<p>So basically, COMPLETing a release CLOSes the dictionary it uses, <strong>if</strong> that dictionary was still OPENED (<strong>else</strong> leaves it CLOSED)</p>
<h3 id="dictionary">Dictionary</h3>
<p>Please be careful adding dictionaries. The code list fields are not validated currently (but they will be in a future release, see DCC-898). This means you need to be extremely careful when uploading/updating a dictionary since you can refer to code lists that don't exist. Please double-check your code list references before uploading dictionaries.</p>
<h5 id="get-current-dictionary">Get current dictionary</h5>
<p>This is open-access (since 13/03/19 - 1.3 re-deployment)</p>
<pre><code class="shell">curl -v -XGET http://hwww{1,2}-dcc:5380/ws/nextRelease/dictionary -H &quot;Accept: application/json&quot;
</code></pre>

<p>Note:  </p>
<ul>
<li>This uses a different end-point, the <code>NextRelease</code> end-point</li>
</ul>
<h5 id="get-array-of-dictionaries">Get Array of Dictionaries</h5>
<p>This is open-access (since 13/07/22 - 1.10 re-deployment)</p>
<p>This will give you all the dictionaries as an array:</p>
<pre><code class="shell">curl -v -XGET http://hwww{1,2}-dcc:5380/ws/dictionaries -H &quot;Accept: application/json&quot;
</code></pre>

<h5 id="get-dictionary-by-version">Get dictionary by version</h5>
<p>This is open-access (since 13/07/22 - 1.10 re-deployment)</p>
<pre><code class="shell">curl -v -XGET http://hwww{1,2}-dcc:5380/ws/dictionaries/myVersion -H &quot;Accept: application/json&quot;
</code></pre>

<h5 id="add-dictionary">Add dictionary</h5>
<p>This will <strong>not</strong> reset the states of submissions (not until you associate with an OPEN release).</p>
<pre><code class="shell">cat /path/to/dictionary.json
{
  &quot;version&quot;: &quot;myVersion&quot;
  &quot;state&quot;: &quot;OPENED&quot;,
  &quot;files&quot;: [
    {
      &quot;fields&quot;: [
        {
          &quot;name&quot;: &quot;donor_id&quot;,
          &quot;restrictions&quot;: [
          ...
}

curl -v -H &quot;Authorization: X-DCC-Auth $(echo -n icgcdcc:${ADMIN_PASSWD?} | base64)&quot; -XPOST http://hwww{1,2}-dcc:5380/ws/dictionaries -H &quot;Content-Type: application/json&quot; --data @/path/to/dictionary.json -H &quot;Accept: application/json&quot;
</code></pre>

<p>Notes:</p>
<ul>
<li>Please refer to the <a href="../../display/DCCSOFT/Dictionary+Curator+SOP">Dictionary Curator SOP</a> for help with the <code>Dictionary</code></li>
<li>Please respect the following constraints: <a href="#AdminSOP-Dictionaryconstraints">Dictionaryconstraints</a> (for now)</li>
<li>The <em>version</em> property is the one that may be referred to from a release (see section below)</li>
<li>Any <em>codelist</em> referred to must already exists</li>
<li>More than one <em>Release</em> may refer to a <em>Dictionary</em></li>
<li>If you are editing a sample dictionary you downloaded make sure you change the state to "OPENED" and not "CLOSED" otherwise the add dictionary action will fail</li>
</ul>
<h5 id="update-dictionary">Update dictionary</h5>
<p>This <strong>WILL</strong> reset the states of submissions for the given release <strong>IF</strong> the OPENED release points to it (updating any other OPENED dictionary will not since no release uses them yet)  </p>
<pre><code class="shell">curl -v -H &quot;Authorization: X-DCC-Auth $(echo -n icgcdcc:${ADMIN_PASSWD?} | base64)&quot; -XPUT http://hwww{1,2}-dcc:5380/ws/dictionaries/myVersion -H &quot;Content-Type: application/json&quot; --data @/path/to/updated/dictionary.json -H &quot;Accept: application/json&quot;
</code></pre>

<p>Notes:</p>
<ul>
<li>The dictionary must be <strong>OPENED</strong> (ie. not used by a past release)</li>
<li>The <em>version</em> in the <em>json</em> file <strong>must</strong> match that of the URL</li>
</ul>
           </div>
           </div>
        </div>

        <footer class="col-md-12">
            <hr>
            
                <center>&copy; 2015 ICGC.org</center>
            
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script src="../../mkdocs/js/lunr-0.5.7.min.js"></script>
        <script src="../../js/jquery.highlight-4.closure.js"></script>
        <script src="../../js/base.js"></script>
        <script>var base_url = '../..';</script>
    </body>
</html>